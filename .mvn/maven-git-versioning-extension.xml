<configuration xmlns="https://github.com/qoomon/maven-git-versioning-extension"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:schemaLocation="https://github.com/qoomon/maven-git-versioning-extension https://qoomon.github.io/maven-git-versioning-extension/configuration-9.8.2.xsd">

    <describeTagPattern><![CDATA[v\d+\.\d+\.\d+(?:-(?<preRelease>(?<preReleaseType>alpha|beta|rc)\.(?<preReleaseIncrement>\d+)))?]]></describeTagPattern>
    <describeTagMaxDepth>100</describeTagMaxDepth>

    <refs considerTagsOnBranches="true">
        <ref type="tag">
            <pattern><![CDATA[v(?<version>\d+\.\d+\.\d+(?:-(?<preRelease>(?<preReleaseType>alpha|beta|rc)\.(?<preReleaseIncrement>\d+)))?)]]></pattern>
            <version>${ref.version}</version>
        </ref>

        <ref type="branch">
            <pattern>develop</pattern>
            <describeTagFirstParent>false</describeTagFirstParent>
            <version>${describe.tag.version.major}.${describe.tag.version.minor.next}.0-SNAPSHOT</version>
        </ref>

        <ref type="branch">
            <pattern>main</pattern>
            <describeTagFirstParent>false</describeTagFirstParent>
            <version>${describe.tag.version.major}.${describe.tag.version.minor}.${describe.tag.version.patch.next}-SNAPSHOT</version>
        </ref>

        <ref type="branch">
            <pattern><![CDATA[release/(?<major>\d+)\.(?<minor>\d+)(?:\.x)?]]></pattern>
            <describeTagPattern><![CDATA[\Qv{{ref.major}}.{{ref.minor}}.0-rc.\E(?<rcIncrement>\d+)]]></describeTagPattern>
            <describeTagMaxDepth>30</describeTagMaxDepth>
            <version>${ref.major}.${ref.minor}.0-rc.${describe.tag.rcIncrement:-0:next}-SNAPSHOT</version>
        </ref>

        <ref type="branch">
            <pattern><![CDATA[hotfix/(?<title>.+)]]></pattern>
            <describeTagPattern><![CDATA[v\d+\.\d+\.\d+]]></describeTagPattern>
            <version>${describe.tag.version.major}.${describe.tag.version.minor}.${describe.tag.version.patch.next}-${ref.title:word}-SNAPSHOT</version>
        </ref>

        <ref type="branch">
            <pattern><![CDATA[rcfix/(?<title>.+)]]></pattern>
            <describeTagPattern><![CDATA[v(?<major>\d+)\.(?<minor>\d+)\.0-rc\.(?<rcIncrement>\d+)]]></describeTagPattern>
            <version>${describe.tag.version.major}.${describe.tag.version.minor}.0-rc.${describe.tag.rcIncrement:-0:next}-${ref.title:word}-SNAPSHOT</version>
        </ref>

        <ref type="branch">
            <pattern><![CDATA[(?:feature/)?/(?<feature>.+)]]></pattern>
            <version>${describe.tag.version.major}.${describe.tag.version.minor.next}.0-${ref.feature:word}-SNAPSHOT</version>
        </ref>

    </refs>

    <!-- optional fallback configuration in case of no matching ref configuration-->
    <rev>
        <version>${version.core}-${commit}-SNAPSHOT</version>
    </rev>

</configuration>